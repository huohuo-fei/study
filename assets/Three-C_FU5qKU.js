import{d as E,g as o,r as u,e as _,h as L,i as j,j as F,G as f,c as C,a as n,k as T,u as a,t as z,F as G,b as x,o as m}from"./index-Ck6tq5XS.js";const O={class:"box"},A={class:"side"},B=["value"],S=["value"],K=["value"],N=["disabled"],R=["disabled"],V=["disabled"],H=["disabled"],I=E({__name:"Three",props:{size:{type:Object,default:{width:0,height:0}},threeMode:{type:String,default:o.draw3D}},setup(U){const w=x(),c=u(),g=j("renderKit");let s;const h=u(0),v=u(!1);function D(){s=g.createDrawCtx(c.value),s.addEventListener("switchGeoMode",t=>{t.mode&&(i.value=r.get(t.mode))}),s.addEventListener("changeSnapshot",t=>{h.value=t.value}),s.addEventListener("disActiveObj",t=>{v.value=!0}),s.addEventListener("activeObj",t=>{v.value=!1})}_(()=>{c.value&&D()}),L(()=>{g.removeLayer(s)});const r=new Map([[o.draw3D,"draw"],[o.rotate3D,"rotate"],[o.resize3D,"resize"],[o.fill3D,"fill"],[o.select,"select"]]),i=u(r.get(o.draw3D)),d=t=>{i.value!==r.get(t)&&(i.value=r.get(t),s.dispatchEvent({type:"switchMode",mode:t}))},y=t=>{if(t){s.dispatchEvent({type:"changeFillColor",color:"none"});return}const e=Math.floor(Math.random()*56)+200,l=Math.floor(Math.random()*201),k=Math.floor(Math.random()*201),$=`rgb(${e},${l},${k})`;s.dispatchEvent({type:"changeFillColor",color:$})},b=F(()=>i.value===r.get(o.draw3D)||v.value),p=u(f.cube),M=t=>{p.value=t.target.value,s.dispatchEvent({type:"switchGeoType",value:p.value})};return(t,e)=>(m(),C("div",O,[n("div",{ref_key:"canvasContainer",ref:c,class:"canvas-container"},null,512),n("div",A,[n("select",{class:"select",value:p.value,onChange:M},[n("option",{value:a(f).cube},"立方体",8,S),n("option",{value:a(f).cylinder},"圆柱体",8,K)],40,B),n("button",{class:"btn",onClick:e[0]||(e[0]=l=>d(a(o).draw3D))},"draw"),n("button",{class:"btn",onClick:e[1]||(e[1]=l=>d(a(o).resize3D)),disabled:b.value}," resize ",8,N),n("button",{class:"btn",onClick:e[2]||(e[2]=l=>d(a(o).rotate3D)),disabled:b.value}," rotate ",8,R),n("button",{class:"btn",onClick:e[3]||(e[3]=l=>d(a(o).fill3D)),disabled:b.value},"fill",8,V),n("button",{class:"btn",onClick:e[4]||(e[4]=l=>d(a(o).select)),disabled:h.value===0},"select",8,H),n("p",null,"当前模式："+z(i.value),1),i.value===a(r).get(a(o).fill3D)?(m(),C(G,{key:0},[n("button",{class:"btn",onClick:e[5]||(e[5]=l=>y())},"切换颜色"),n("button",{class:"btn",onClick:e[6]||(e[6]=l=>y("none"))},"清空颜色")],64)):T("",!0),e[8]||(e[8]=n("hr",null,null,-1)),n("button",{class:"btn",onClick:e[7]||(e[7]=l=>a(w).replace("/"))},"Home")])]))}});export{I as default};
